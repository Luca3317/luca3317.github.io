---
interface Props {
  direction?: "left" | "right";
}

const { direction = "left" } = Astro.props;

const technologies = [
  "c",
  "golang",
  "unity",
  "cSharp",
  "git",
  "c++",
  "docker",
];

// Determine the animation class based on direction
const scrollClass = direction === "right" ? "animate-scroll-right" : "animate-scroll-left";
---

<div class="relative overflow-x-hidden py-8">
  <div class="pointer-events-none absolute inset-y-0 left-0 w-32 bg-gradient-to-r from-[var(--background)] to-transparent z-20"></div>
  <div class="pointer-events-none absolute inset-y-0 right-0 w-32 bg-gradient-to-l from-[var(--background)] to-transparent z-20"></div>

  <div class={["flex hover:animate-paused gap-12 md:gap-20 w-max", scrollClass].join(' ')}>
    {
      [...technologies, ...technologies, ...technologies].map((tech) => (
        <div class="flex items-center gap-2 group transition-all duration-300">
          <img
            src={`/Homepage/svg/${tech}.svg`}
            alt={tech}
            class="h-7 w-auto object-contain transition-transform group-hover:scale-110 opacity-60"
            width="30"
            height="30"
            loading="lazy"
          />
          <span class="text-lg font-medium text-[var(--white-icon)]">
            {tech.charAt(0).toUpperCase() + tech.slice(1)}
          </span>
        </div>
      ))
    }
  </div>
</div>

<style is:global>
  /* Base Animation Speeds */
  .animate-scroll-left, .animate-scroll-right {
    animation-duration: 60s;
    animation-timing-function: linear;
    animation-iteration-count: infinite;
  }

  @media (min-width: 768px) {
    .animate-scroll-left, .animate-scroll-right {
      animation-duration: 50s;
    }
  }

  /* Left Animation: starts at 0, moves to -50% */
  @keyframes scrollLeft {
    from { transform: translateX(0); }
    to { transform: translateX(-33.33%); }
  }
  .animate-scroll-left {
    animation-name: scrollLeft;
  }

  /* Right Animation: starts at -33.33%, moves to 0 */
  @keyframes scrollRight {
    from { transform: translateX(-33.33%); }
    to { transform: translateX(0); }
  }
  .animate-scroll-right {
    animation-name: scrollRight;
  }
</style>